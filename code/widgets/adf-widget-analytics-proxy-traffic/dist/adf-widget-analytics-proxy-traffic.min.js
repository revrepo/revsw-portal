!function(t,i){"use strict";angular.module("adf.widget.analytics-proxy-traffic",["adf.provider"]).config(["dashboardProvider",function(t){t.structure("6-6",{rows:[{columns:[{styleClass:"col-md-6"},{styleClass:"col-md-6"}]}]})}]).config(["dashboardProvider",function(t){var i={title:"Proxy Traffic",titleTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-title-with-params.html",description:"Web Alalytics Proxy Traffic",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/view.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html",styleClass:"rev-widget",controller:["$scope","$window",function(t,i,e){i.dispatchEvent(new Event("resize"))}],config:{},edit:{templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/edit.html",controller:["$scope","$q","Stats","Countries","User","AlertService","filterGeneratorConst",function(t,i,e,a,s,l,o){angular.copy(t.config);t.filtersList=[o.COUNTRIES,o.OS,o.DEVICES],t.onDomainSelected=function(){t.domain&&t.domain.id&&t.reload()},t.reload=function(){angular.extend(t.config,{domain:angular.copy(t.domain)}),t.reloadCountry(t.domain.id),t.reloadOS(t.domain.id),t.reloadDevice(t.domain.id),t.reloadStatusCode(t.domain.id)},t.flCountry={},t.reloadCountry=function(i){t.flCountry=a.query()},t.flOs={labels:[],data:[]},t.reloadOS=function(i){e.os({domainId:i}).$promise.then(function(i){t.flOs=i.data})},t.flDevice={labels:[],data:[]},t.reloadDevice=function(i){e.device({domainId:i}).$promise.then(function(i){t.flDevice.labels.length=0,t.flDevice.data.length=0,i.data&&i.data.length>0&&angular.forEach(i.data,function(i){t.flDevice.labels.push(i.key),t.flDevice.data.push(i.count)})})},t.statusCode={labels:[],data:[]},t.reloadStatusCode=function(i){return e.statusCode({domainId:i}).$promise.then(function(i){t.statusCode.labels.length=0,t.statusCode.data.length=0,i.data&&i.data.length>0&&(angular.forEach(i.data,function(i){t.statusCode.labels.push(i.key),t.statusCode.data.push(i.count)}),t.config.statusCode=t.statusCode.labels)})},s.getUserDomains(!0);var n={},c="Last 1 Day",r="Last 7 Days ",d="Last 30 Days";n[c]=[moment().subtract(1,"days"),moment()],n[r]=[moment().subtract(7,"days"),moment()],n[d]=[moment().subtract(30,"days"),moment()],t.datePicker={overlay:{show:!0,val:c},options:{timePicker:!0,timePickerIncrement:30,ranges:n},date:{startDate:n[c][0],endDate:n[c][1]}}}]}};t.widget("analytics-proxy-traffic-bandwidth-usage",angular.extend(i,{title:"Bandwidth Usage",titleTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-title-with-params.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html",description:"Display the Bandwidth Usage (requests-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-requests-chart.tpl.html"})).widget("analytics-proxy-traffic-chart",angular.extend(i,{title:"Total Requests",description:"Display the Total Requests (proxy-traffic-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-proxy-traffic-chart.tpl.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html"})).widget("analytics-proxy-traffic-http-https-chart",angular.extend(i,{title:"HTTP/HTTPS Hits",description:"Display the HTTP/HTTPS Hits (http-https-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-http-https-chart.tpl.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html"})).widget("analytics-proxy-http-status-code-chart",angular.extend(i,{title:"HTTP Status Code Hits",description:"Display the HTTP Status Code Hits (http-status-code-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-http-status-code-chart.tpl.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html"})).widget("analytics-proxy-request-status-chart",angular.extend(i,{title:"Success/Failure Request Status",description:"Display the Success/Failure Request Status(request-status-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-request-status-chart.tpl.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html"})).widget("analytics-proxy-hits-cache-chart",angular.extend(i,{title:"Edge Cache Efficiency Hits",description:"Display the Edge Cache Efficiency Hits(hits-cache-chart)",templateUrl:"{widgetsPath}/analytics-proxy-traffic/src/views/view-hits-cache-chart.tpl.html",editTemplateUrl:"{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html"}))}]),angular.module("adf.widget.analytics-proxy-traffic").run(["$templateCache",function(t){t.put("{widgetsPath}/analytics-proxy-traffic/src/edit.html",'<div class=form-group><label for=domain>Domain</label><div domain-select id=domain ng-model=domain on-select=onDomainSelected() select-one=true></div></div><div class=form-group><label for=domain>Filters</label></div><div class=form-inline><div class=form-group><input date-range-picker ng-model=config.filters.time_period options=::datePicker.options class="form-control date-picker select2" type=text></div><div class=form-group><select id=country class="form-control fixed" ng-options="::key as ::item for (key, item) in flCountry" ng-model=config.filters.country ng-disable=!domain><option>All Countries</option></select></div><div class=form-group><select id=os class="form-control fixed" ng-options="item for item in flOs.labels" ng-model=config.filters.os ng-disable=!domain><option>All OS</option></select></div><div class=form-group><select id=device class="form-control fixed" ngoptions="item for item in flDevice.labels" ng-model=config.filters.device><option>All Devices</option><option ng-repeat="item in flDevice.labels" value={{item}}>{{item}}</option></select></div></div>'),t.put("{widgetsPath}/analytics-proxy-traffic/src/view.html","<div><h1>Widget view</h1><p>Content of {{config.sample}}</p></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/widget-edit.html",'<form name=widgetEditForm novalidate role=form ng-submit=saveDialog()><div class=modal-header><button type=button class=close ng-click=closeDialog() aria-hidden=true>&times;</button><h4 class=modal-title>{{widget.title}}</h4></div><div class=modal-body><div class="alert alert-danger" role=alert ng-show=validationError><strong>Apply error:</strong> {{validationError}}</div><div ng-if=widget.edit><adf-widget-content model=definition content=widget.edit></adf-widget-content></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=closeDialog()>Cancel</button> <input type=submit class="btn btn-primary" ng-disabled=widgetEditForm.$invalid value=Apply></div></form>'),t.put("{widgetsPath}/analytics-proxy-traffic/src/widget-title-with-params.html",'<h3 class=panel-title>{{definition.title}} <span ng-if=!!definition.config.domain>(<strong>{{definition.config.domain.domain_name}}</strong>)</span> <span class=pull-right><a title="reload widget content" ng-if=widget.reload ng-click=reload()><i class="glyphicon glyphicon-refresh"></i></a> <a title="change widget location" class=adf-move ng-if=editMode><i class="glyphicon glyphicon-move"></i></a> <a title="collapse widget" ng-show="options.collapsible && !widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="glyphicon glyphicon-minus"></i></a> <a title="expand widget" ng-show="options.collapsible && widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="glyphicon glyphicon-plus"></i></a> <a title="edit widget configuration" ng-click=edit() ng-if=editMode><i class="glyphicon glyphicon-cog"></i></a> <a title="fullscreen widget" ng-click=openFullScreen() ng-show=options.maximizable><i class="glyphicon glyphicon-fullscreen"></i></a> <a title="remove widget" ng-click=remove() ng-if=editMode><i class="glyphicon glyphicon-remove"></i></a></span></h3><span class=widget_filters_info ng-show=!!definition.config.filters[index.key] ng-repeat="index in [{key:\'os\',title:\'OS\'},{key:\'country\',title:\'Сountry\'},{key:\'device\',title:\'Device\'}]"><small ng-if=!!definition.config.filters[index.key]>{{index.title}}: {{definition.config.filters[index.key]}}</small></span> <span></span>'),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-hits-cache-chart.tpl.html","<div class=col-lg-12><div hits-cache-chart filters-sets=config.filters ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-http-https-chart.tpl.html","<div class=col-lg-12><div http-https-chart filters-sets=config.filters ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-http-status-code-chart.tpl.html","<div class=col-lg-12><div http-status-code-chart filters-sets=config.filters status-codes=config.statusCode ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-proxy-traffic-chart.tpl.html","<div class=col-lg-12><div proxy-traffic-chart filters-sets=config.filters status-codes=config.statusCode.labels ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-request-status-chart.tpl.html","<div class=col-lg-12><div request-status-chart status-codes=config.statusCode fl-os=config.os.labels fl-device=config.device.labels fl-country=config.countries ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/view-requests-chart.tpl.html","<div class=col-lg-12><div requests-chart filters-sets=config.filters ng-domain=config.domain></div></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/parts/panel-filter-settings.tpl.html","<div ng-show=!!config.filters[index.key] class=col-md-3 ng-repeat=\"index in [{key:'os',title:'OS'},{key:'country',title:'Сountry'},{key:'device',title:'Device'}]\"><small>{{index.title}}: {{config.filters[index.key]}}</small></div>"),t.put("{widgetsPath}/analytics-proxy-traffic/src/views/parts/title-with-filter-params.tpl.html","")}])}(window);