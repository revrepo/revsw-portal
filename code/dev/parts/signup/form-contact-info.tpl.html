<div class="form-contact-info panel panel-default">
  <div class="panel-heading" ng-if="$ctrl.isRegistryFinish">
    <h4>Please finish your registration</h4>
  </div>
  <div class="panel-body" ng-if="$ctrl.isRegistryFinish">
    <div class="row">
      <div class="col-md-12">
        <p class="lead">
          We have sent an email with verification link to your email address <b>{{$ctrl.model.email}}</b> - please continue the RevAPM registration process by following the link. Please also check your Spam mailbox.
        </p>
        <p class="lead">
          Now you can close the browser window.
        </p>
      </div>
    </div>
  </div>
  <div class="panel-heading" ng-if="!$ctrl.isRegistryFinish">
    <div class="row">
      <div class="col-md-12">
        <h4 class="text-center"> Please fill in your contact info. Fields marked with asterisk (*) are required. </h4>
      </div>
    </div>
  </div>
  <div class="panel-body" ng-if="!$ctrl.isRegistryFinish">
    <form class="form-horizontal" name="newUser" novalidate>
      <div class="form-group " ng-class="{ 'has-error': newUser.email.$invalid &&
                                newUser.email.$dirty }">
        <label for="email" popover-append-to-body="{{true}}" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="New user's email address - the address should be unique across the system">
          Email *</label>
        <div class="col-sm-10">
          <input type="email" autofocus class="form-control" id="email" name="email" placeholder="Email" ng-model="$ctrl.model.email" required ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error': newUser.password.$invalid &&
                            newUser.password.$dirty }">
        <label for="password" popover-append-to-body="{{true}}" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="At least eight symbols">Password *</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="password" name="password" ng-model="$ctrl.model.password" minlength="8" required ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error':
                         ($ctrl.model.password != $ctrl.model.passwordConfirm ||
                          newUser.passwordConfirm.$invalid) &&
                            newUser.passwordConfirm.$dirty }">
        <label for="passwordConfirm" class="col-sm-2 control-label" popover-trigger="mouseenter">Confirm Password *</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="passwordConfirm" name="passwordConfirm" required ng-model="$ctrl.model.passwordConfirm" ng-disabled="_loading">
        </div>
      </div>
      <hr>
      <div class="form-group">
        <label for="firstName" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="First name">First Name *</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="firstName" name="firstName" placeholder="First Name" ng-required ng-model="$ctrl.model.first_name" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group">
        <label for="lastName" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Last name">Last Name *</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Last Name" ng-model="$ctrl.model.last_name" ng-required ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error': newUser.phoneNumber.$invalid &&
                            newUser.phoneNumber.$dirty }">
        <label for="phoneNumber" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Contact phone number">Phone Number *</label>
        <div class="col-sm-10">
          <input type="text" ng-pattern="phoneRegex" class="form-control" required id="phoneNumber" name="phoneNumber" placeholder="Phone Number" ng-model="$ctrl.model.phone_number" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error': newUser.companyName.$invalid &&
                            newUser.companyName.$dirty }">
        <label for="companyName" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Will be generated from your first and last name if left empty.">
          Company Name &nbsp;</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="companyName" name="companyName" placeholder="Company Name" maxlength="250" ng-model="$ctrl.model.company_name" ng-disabled="_loading">
        </div>
      </div>
      <hr>
      <div class="form-group">
        <label for="address1" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used as a billing address later.">Address *</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" required id="address1" placeholder="Address" ng-model="$ctrl.model.address1" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group">
        <label for="address2" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used as a billing address later.">Address (Line 2) &nbsp;</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="address2" placeholder="Address (Line 2)" ng-model="$ctrl.model.address2" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group">
        <label for="Country" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used in a billing address later.">Country *</label>
        <div class="col-sm-10">
          <select type="text" class="form-control" id="Country" placeholder="Country" required ng-model="$ctrl.model.country" ng-options="key as value for (key , value) in  $ctrl.countries" ng-disabled="_loading">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="state" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used in a billing address later.">State *</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="state" required placeholder="State" ng-model="$ctrl.model.state" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group">
        <label for="City" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used in a billing address later.">City *</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="City" required placeholder="City" ng-model="$ctrl.model.city" ng-disabled="_loading">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error': newUser.Zipcode.$invalid &&
                            newUser.Zipcode.$dirty }">
        <label for="Zipcode" class="col-sm-2 control-label" popover-trigger="mouseenter" popover="Could be used in a billing address later.">Zip Code *</label>
        <div class="col-sm-10">
          <input type="text" ng-pattern="zipRegex" class="form-control" id="Zipcode" name="Zipcode" maxlength="10" required placeholder="Zip Code" ng-model="$ctrl.model.zipcode" ng-disabled="_loading">
        </div>
      </div>
      <hr>
      <div class="form-group">
        <div class="col-lg-12 subscribe-contact-info-terms">
          By clicking on Sign Up you agree with our
          <a href="https://www.revapm.com/tos/" target="_blank">Terms Of Service</a>,
          <a href="https://www.revapm.com/aup/" target="_blank">Acceptable Use Policy</a> and
          <a href="https://www.revapm.com/privacy/" target="_blank">Privacy Policy</a>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-6 col-sm-6 pull-right">
          <a ui-sref="^" class="btn btn-default">
            <i class="glyphicon glyphicon-remove"></i>&nbsp; Cancel
          </a>
          <button class="btn btn-success" ng-disabled="_loading || newUser.$invalid ||(($ctrl.model.password != $ctrl.model.passwordConfirm ||newUser.passwordConfirm.$invalid) &&newUser.passwordConfirm.$dirty )" ng-click="$ctrl.onSignUp($ctrl.model)">
           <i class="glyphicon glyphicon-log-in"></i> Sign Up
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
