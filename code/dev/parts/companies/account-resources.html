<div class="container-fluid" ui-view="page">
  <div class="row">
    <div class="col-sm-12">
      <h2 class="pull-left page-title">
        All Account Resources
      </h2>
    </div>
  </div>
  <div class="row" nginit="initStatements()">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-heading" ng-if="!userService.isAdmin()">
          <div class="row">
            <div class="col-sm-12 form-inline">
              <div class="form-group">
                <a ng-disabled="_loading" ui-sref="index.accountSettings.companies" class="btn btn-default">
                  <i class="glyphicon glyphicon-arrow-left"></i>&nbsp; Back
                </a>
              </div>
              <form class=" form-group">
                <!-- <div app-select ng-model="application" on-select="reloadDirs()"></div> -->
                <ui-select ng-model="account" theme="select2" ng-animate-disabled ng-disabled="" on-select="onAccountSelect($model)" style="min-width: 300px;">
                  <ui-select-match placeholder="Select Account">{{$select.selected.acc_name}}</ui-select-match>
                  <ui-select-choices repeat="item in accounts | filter: {acc_name: $select.search}">
                    <div ng-bind-html="item.acc_name|highlight: $select.search"></div>
                  </ui-select-choices>
                </ui-select>
              </form>
              <div class="form-group">
                <button class="btn btn-success" id="btn-refresh-page-data" ng-disabled="_loading || isReload" ng-click="onClickRefresh()">
             <i class="glyphicon glyphicon-refresh" ng-class="_loading ? 'spin' : ''"></i>&nbsp; Refresh
                                    </button>
              </div>
            </div>
          </div>
        </div>
        <div class="panel-body accountresources">
          <!-- ==== Applications ========================================== -->
          <section class="row accountresources--apps" ng-controller="AppsController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>Mobile Apps</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any apps registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table table-condensed">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('app_name')">Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'app_name'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th class="thin">
                      <a href="" ng-click="order('app_platform')">Platform</a>
                      <span class="sortorder" ng-show="filter.predicate === 'app_platform'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th class="thin">
                      <a href="" ng-click="order('last_app_published_version')">Version</a>
                      <span class="sortorder" ng-show="filter.predicate === 'last_app_published_version'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <!--<th>SDK Key</th>-->
                    <!--<th class="thin">Status</th>-->
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <a ng-href="#/apps/{{item.app_platform.toLocaleLowerCase()}}/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading"
                        uib-tooltip="Edit App">
                  {{item.app_name}}
                </a>
                    </td>
                    <td>{{item.app_platform}}</td>
                    <td>{{item.last_app_published_version}}</td>
                    <td>{{ getRelativeDate(item.updated_at) }}</td>
                    <!--<td>
                  <button class="btn btn-primary btn-sdk-key" clipboard text="item.sdk_key" on-copied="copyCallback()" on-error="copyCallback(err)" style="vertical-align: initial;" uib-tooltip="Click to copy the key to the clipboard" tooltip-placement="top"><i class="fa fa-files-o"></i></button>
                  <button class="btn btn-primary btn-sdk-key" ng-click="switchKeyVisibility(item)" ng-hide="item.showKey" style="vertical-align: initial;">Show SDK Key</button>
                  <input ng-if="item.showKey" ng-blur="switchKeyVisibility(item)" class="form-control" value="{{item.sdk_key}}" style="width: 300px; display: inline-block; position: absolute; z-index: 999; margin-left: 4px;" focus-me="item.showKey">
                </td>-->
                    <!--<td>
                  <div app-staging-status ng-id="item.id"></div>
                </td>-->
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <a ng-href="#/apps/{{item.app_platform.toLocaleLowerCase()}}/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading"
                        uib-tooltip="Edit App">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!-- TODO: change ui-sref to ng-href -->
                      <!--<a ui-sref=".configure({id: item.id})" ng-if="!item.loading" uib-tooltip="Advanced Edit App">
                    <i class="glyphicon glyphicon-cog"></i>
                  </a>
                  <a href="" ng-if="!item.loading" ng-class="{'disabled': isReadOnly() }"ng-click="deleteApp(item)" uib-tooltip="Delete App">
                    <i class="glyphicon glyphicon-trash"></i>
                  </a>
                  <a href="#/mobile/traffic" ng-if="!item.loading" ng-click="storeToStorage(item)" uib-tooltip="Stats">
                    <i class="glyphicon glyphicon-stats"></i>
                  </a>
                  <a href="" ui-sref=".versions({id: item.id})" ng-if="!item.loading" uib-tooltip="Previous Versions">
                    <i class="glyphicon glyphicon-book"></i>
                  </a>-->
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!--  ====Domains ====================================================== -->
          <section class="row accountresources--doamins" ng-controller="DomainsCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>Domains</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any web domains registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('domain_name')">Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'domain_name'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('cname')">CNAME</a>
                      <span class="sortorder" ng-show="filter.predicate === 'cname'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <!--<th class="thin">Status</th>-->
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <!-- TODO: delete uisref or use full state name and delete ng-href-->
                      <a ng-href="#/domains/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit Domain">
                  {{item.domain_name}}
                </a>
                    </td>
                    <td>
                      <button class="btn  btn-xs btn-primary" clipboard text="item.cname" on-copied="copyCallback()" on-error="copyCallback(err)"
                        style="vertical-align: initial;" uib-tooltip="Click to copy the CNAME to the clipboard" tooltip-placement="top"><i class="fa fa-files-o"></i></button>
                      <span title="{{item.cname}}"> {{item.cname}} </span></td>
                    <td>{{ getRelativeDate(item.updated_at) }}</td>
                    <!--<td>
                    <div domain-staging-status ng-id="item.id"></div>
                  </td>-->
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <a ng-href="#/domains/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit Domain">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!--<a ui-sref=".edit({id: item.id,isAdvanced:true})" ng-if="!item.loading" uib-tooltip="Advanced Edit Domain">
                      <i class="glyphicon glyphicon-cog"></i>
                    </a>
                    <a href="" ng-if="!item.loading" ng-class="{'disabled': isReadOnly() }" ng-click="deleteDomain(item)" uib-tooltip="Delete Domain">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>-->
                      <!-- TODO: delete uisref -->
                      <a href="#/reports/proxy" ng-if="!item.loading" ng-click="storeToStorage(item)" uib-tooltip="Stats">
                        <i class="glyphicon glyphicon-stats"></i>
                      </a>
                      <a ng-href="#/domains/versions/{{item.id}}" uisref=".versions({id: item.id})" ng-if="!item.loading" uib-tooltip="Previous Versions">
                        <i class="glyphicon glyphicon-book"></i>
                      </a>
                      <a ng-href="#/domains/checkintegration/{{item.id}}" uisref=".checkintegration({id: item.id})" ng-if="!item.loading" uib-tooltip="Check Domain Integration Configuration">
                        <i class="glyphicon glyphicon-check"></i>
                      </a>
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                  <!--<tr class="disabled loading">-->
                  <!--<td>John</td>-->
                  <!--<td>Doe</td>-->
                  <!--<td>Monday, Aug 10, 2015, 8:31 PM</td>-->
                  <!--<td class="actions">-->
                  <!--<i class="glyphicon glyphicon-refresh spin"></i>-->
                  <!--</td>-->
                  <!--</tr>-->
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!-- ==== SSL Certificates ============================================= -->
          <section class="row accountresources--ssl_certs" ng-controller="SSL_certsCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>SSL Certificates</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any SSL certificates registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('cert_name')">Certificate Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'cert_name'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th><a href="" ng-click="order('domains')">Domains</a>
                      <span class="sortorder" ng-show="filter.predicate === 'domains'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th ng-if="auth.isRevadmin()"><a href="" ng-click="order('cert_type')">Cert Type</a>
                      <span class="sortorder" ng-show="filter.predicate === 'cert_type'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th> <a href="" ng-click="order('expires_at')">Expires At</a>
                      <span class="sortorder" ng-show="filter.predicate === 'expires_at'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <!--<th class="thin">Status</th>-->
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <!-- TODO: delete uisref -->
                      <a ng-href="#/ssl_certs/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit SSL Certificate">
                  {{item.cert_name}}
                </a>
                    </td>
                    <td>
                      <div class="domains-alternative-names">{{item.domains}}</div>
                    </td>
                    <td ng-if="auth.isRevadmin()">{{item.cert_type}}</td>
                    <td>{{getRelativeDate(item.expires_at)}}</td>
                    <td>{{getRelativeDate(item.updated_at) }}</td>
                    <!--<td>
                  <div cert-staging-status ng-id="item.id">ddd</div>
                </td>-->
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <!-- TODO: delete uisref-->
                      <a ng-href="#/ssl_certs/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit SSL Certificate">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!-- TODO: need rebase template  -->
                      <!--<a href="" ng-if="!item.loading" ng-click="deleteSSLCert(item)" ng-class="{'disabled':isReadOnly()}" uib-tooltip="Delete SSL Certificate">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>-->
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!-- ==== SSL Names ============================================= -->
          <section class="row accountresources--ssl_names" ng-controller="SSLNamesCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>SSL Names</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any SSL names registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table ssl-names--table ">
                <thead>
                  <tr>
                    <th><a href="" ng-click="order('ssl_name')">Domain Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'ssl_name'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th><a href="" ng-click="order('verification_method')">Verification Method</a>
                      <span class="sortorder" ng-show="filter.predicate === 'verification_method'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th> <a href="" ng-click="order('updated_by')">Updated By</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_by'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th class="status status--verification">
                      <a href="" ng-click="order('verified')">Verification Status</a>
                      <span class="sortorder" ng-show="filter.predicate === 'verified'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th class="status status--publishing">
                      <a href="" ng-click="order('published')">Publishing Status</a>
                      <span class="sortorder" ng-show="filter.predicate === 'published'" ng-class="{reverse: filter.reverse}"></span></th>
                    <!--<th>Actions</th>-->
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td> {{item.ssl_name}} </td>
                    <td>{{SSL_NAMES_VERIFICATION_METHODS[item.verification_method]}}</td>
                    <td>{{getRelativeDate(item.updated_at) }}</td>
                    <td>{{item.updated_by}}</td>
                    <td>
                      <label class="label" ng-class="item.verified? 'label-primary':'label-warning'" ng-bind="item.verified ? 'Verified':'Not Verified'">{{item.verified}}</label>
                    </td>
                    <td>
                      <label class="label" ng-class="item.published ? 'label-primary':'label-warning'" ng-bind="item.published ? 'Published':'Not Published'">{{item.published}}</label>
                    </td>
                    <!-- TODO: need rebase template  -->
                    <!--<td class="actions">
                    <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                    <a href="" ng-class="(item.verified ||isReadOnly())?'disabled':''" ng-disabled="item.verified ||isReadOnly()" ng-if="!item.loading"
                      uib-tooltip="{{item.verified?'Already Verified':'Verify Domain Control'}}" ng-click="onVerifyDomain($event,item)">
                      <i class="glyphicon glyphicon-check"></i>
                    </a>
                    <a href="" ng-class="(isReadOnly())?'disabled':''" ng-if="!item.loading" ng-click="deleteSSLName(item)" uib-tooltip="Delete SSL Name">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>
                  </td>-->
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!-- ==== DNS Zones ============================================= -->
          <section class="row accountresources--dns_zones" ng-controller="DNSZonesCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>DNS Zones</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any DNS zones registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('zone')">Zone Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'zone'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th><a href="" ng-click="order('records_count')"># Of Records</a>
                      <span class="sortorder" ng-show="filter.predicate === 'records_count'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th>DNS Servers</th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th> <a href="" ng-click="order('updated_by')">Updated By</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_by'" ng-class="{reverse: filter.reverse}"></span></th>
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <!-- TODO: change ui-sref to ng-href and delete uisref-->
                      <a ng-href="#/dns/zones/{{item.id}}/records" uisref="^.dns_zone_records({dns_zone_id: item.id})" ng-if="!item.loading" uib-tooltip="Manage Records">
                  {{item.zone}}
                </a>
                    </td>
                    <td>{{item.records_count}}</td>
                    <td>
                      <div ng-repeat="server in item.dns_servers">{{server}}<span ng-hide="$last">,</span></div>
                    </td>
                    <td>{{getRelativeDate(item.updated_at) }}</td>
                    <td>{{item.updated_by}}</td>
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <!-- TODO: change ui-sref to ng-href and delete uisref-->
                      <a ng-href="#/dns/zones/{{item.id}}/records" uisref="^.dns_zone_records({dns_zone_id: item.id})" ng-if="!item.loading" uib-tooltip="Manage Records">
                        <i class="glyphicon glyphicon-tasks"></i>
                      </a>
                      <a ng-href="#/dns/zones/{{item.id}}/edit" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit Zone Properties">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!-- TODO: need rebase template  -->
                      <!--<a href="" ng-if="!item.loading" ng-class="{'disabled': isReadOnly()}" ng-click="deleteDNSZone(item)" uib-tooltip="Delete Zone">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>
                    <a ui-sref=".checkintegration({id: item.id})" ng-if="!item.loading" uib-tooltip="Check DNS Zone Integration Configuration">
                      <i class="glyphicon glyphicon-check"></i>
                    </a>-->
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!--  ==== Log Shipping Jobs =========================================== -->
          <section class="row accountresources--logshippingjobs" ng-controller="LogShippersCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>Log Shipping Jobs</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any log shipping jobs configured in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination ng-if="records !== null"></crud-pagination>
              <table class="table">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('job_name')">Job Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'job_name'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th><a href="" ng-click="order('source_type')">Source</a>
                      <span class="sortorder" ng-show="filter.predicate === 'source_type'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th><a href="" ng-click="order('sourceName')">Source Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'sourceName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th> <a href="" ng-click="order('destination_type')">Destination</a>
                      <span class="sortorder" ng-show="filter.predicate === 'destination_type'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th> <a href="" ng-click="order('destination_host')">Host</a>
                      <span class="sortorder" ng-show="filter.predicate === 'destination_host'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th class="state">
                      <a href="" ng-click="order('operationalModeName')">Current State</a>
                      <span class="sortorder" ng-show="filter.predicate === 'operationalModeName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)" ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <!-- TODO: delete uisref -->
                      <a ng-href="#/logshippers/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit Job">
                  {{item.job_name}}
                </a>
                    </td>
                    <td>{{sourceTypes[item.source_type]}}
                    </td>
                    <td>
                      <div class="source-name">{{item.sourceName}}</div>
                      <!-- NOTE: it`s mapping data-->
                    </td>
                    <td>{{destinationTypes[item.destination_type]}}
                    </td>
                    <td>{{item.destination_host}}</td>
                    <td>{{getRelativeDate(item.updated_at) }}</td>
                    <td class="state">
                      <!-- {{item.operationalModeName}} -->
                      <div logshippers-staging-status current-state="item.operationalModeName" ng-id="item.id"></div>
                      <!--NOTE: it`s{{item.operational_mode}}-->
                    </td>
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <!-- TODO: delete uisref -->
                      <a ng-href="#/logshippers/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit Job">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!-- TODO: rebase template for work this action-->
                      <!--<a href="" ng-if="!item.loading" ng-class="{'disabled':isReadOnly()}" ng-click="deleteJob(item)" uib-tooltip="Delete Job">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>-->
                      <!-- “Pause With Log Piling” -->
                      <!--<a href="" ng-class="{'not-active':item.operational_mode=='pause','disabled':isReadOnly()}" ng-if="!item.loading" ng-click="onChangeLogShippingState(item,'pause')"
                      uib-tooltip="Pause With Log Piling">
                      <i class="glyphicon glyphicon-pause"></i>
                    </a>-->
                      <!--   “Start”  -->
                      <!--<a href="" ng-class="{'not-active':item.operational_mode=='active','disabled':isReadOnly()}" ng-if="!item.loading" ng-click="onChangeLogShippingState(item,'active')"
                      uib-tooltip="Start">
                      <i class="glyphicon glyphicon-play"></i>
                    </a>-->
                      <!-- “Stop” / “Start”  -->
                      <!--<a href="" ng-class="{'not-active':item.operational_mode=='stop','disabled':isReadOnly()}" ng-if="!item.loading" ng-click="onChangeLogShippingState(item,'stop')"
                      uib-tooltip="Stop">
                      <i class="glyphicon glyphicon-stop"></i>
                    </a>-->
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div>{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!-- ==== Users ==================================================== -->
          <section class="row accountresources--users" ng-controller="UsersCrudController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>Users</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any users registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table users-list">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('firstname')">First Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'firstname'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('lastname')">Last Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'lastname'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('email')">Email</a>
                      <span class="sortorder" ng-show="filter.predicate === 'email'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('role')">Role</a>
                      <span class="sortorder" ng-show="filter.predicate === 'role'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('two_factor_auth_enabled')">2FA</a>
                      <span class="sortorder" ng-show="filter.predicate === 'two_factor_auth_enabled'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('last_login_at')">Last Login</a>
                      <span class="sortorder" ng-show="filter.predicate === 'last_login_at'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                    <th>Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="user in filteredRecords | limitTo:filter.limit:filter.skip track by $index" id="anchor{{::$index}}" ng-click="saveAnchorScrollIndex($index)">
                    <td>
                      <a ui-sref=".edit({id: user.user_id})" ng-if="!item.loading" uib-tooltip="Edit User Profile">
                  {{user.firstname}}
                </a>
                    </td>
                    <td>
                      <!-- TODO: delete uisref or set full state name-->
                      <a ng-href="#/users/edit/{{user.user_id}}" uisref=".edit({id: user.user_id})" ng-if="!item.loading" uib-tooltip="Edit User Profile">
                  {{user.lastname}}
                </a>
                    </td>
                    <td>{{user.email}}</td>
                    <td>{{user.role}}</td>
                    <td>
                      <span class="status-2fa-enabled" ng-if="user.two_factor_auth_enabled==true">Enabled</span>
                      <span class="status-2fa-disabled " ng-if="!user.two_factor_auth_enabled==true">Disabled</span>
                    </td>
                    <td>{{ getRelativeDate(user.updated_at) }}</td>
                    <td>{{ user.last_login_at ? getRelativeDate(user.last_login_at) : 'Never' }}</td>
                    <td class="actions">
                      <!-- TODO: delete uisref or set fuul state name-->
                      <a ng-href="#/users/edit/{{user.user_id}}" uisref=".edit({id: user.user_id})" uib-tooltip="Edit User Profile">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <!-- TODO: rebase template for work this action-->
                      <!--<a href="" ng-click="deleteUser(user)" ng-class="{'disabled':isReadOnly()}" uib-tooltip="Delete User">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>-->
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div class="company-names">{{user.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!--  ==== API Keys ==================================================== -->
          <section class="row accountresources--apikeys" ng-controller="KeysListController">
            <div class="panel-heading">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left">
                    <h2>API Keys</h2>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="alert alert-info" ng-if="records.length == 0 && !_loading">
                Currently the account doesn't have any API keys registered in the system
              </div>
              <div class="alert alert-warning" ng-if="records == null && !_loading">
                Failed to retrieve a list of resources - please try again later
              </div>
              <!-- <div class="alert alert-info" ng-if="_loading">
                <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>&nbsp; Loading...
              </div> -->
              <crud-pagination></crud-pagination>
              <table class="table">
                <thead>
                  <tr>
                    <th>
                      <a href="" ng-click="order('key_name')">Name</a>
                      <span class="sortorder" ng-show="filter.predicate === 'key_name'" ng-class="{reverse: filter.key_name}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('key')">API Key</a>
                      <span class="sortorder" ng-show="filter.predicate === 'key'" ng-class="{reverse: filter.key}"></span>
                    </th>
                    <th>
                      <a href="" ng-click="order('updated_at')">Last Update</a>
                      <span class="sortorder" ng-show="filter.predicate === 'updated_at'" ng-class="{reverse: filter.updated_at}"></span>
                    </th>
                    <th class="actions">Actions</th>
                    <th class="account" ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <a href="" ng-click="order('companyName')">Account</a>
                      <span class="sortorder" ng-show="filter.predicate === 'companyName'" ng-class="{reverse: filter.reverse}"></span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="item in filteredRecords | limitTo:filter.limit:filter.skip track by $index">
                    <td>
                      <!-- TODO: delete uisref or use full state name and delete ng-href-->
                      <a ng-href="#/keys/edit/{{item.id}}" uisref="index.accountSettings.keys.edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit API Key">
                  {{item.key_name}}
                </a>
                    </td>
                    <td>
                      <button class="btn btn-primary" clipboard text="item.key" on-copied="copyCallback()" on-error="copyCallback(err)" style="vertical-align: initial;"
                        uib-tooltip="Click to copy the key to the clipboard" tooltip-placement="top"><i class="fa fa-files-o"></i></button>
                      <button class="btn btn-primary" ng-click="switchKeyVisibility(item)" ng-hide="item.showKey" style="vertical-align: initial;">Show API Key</button>
                      <input ng-if="item.showKey" ng-blur="switchKeyVisibility(item)" class="form-control" value="{{item.key}}" style="width: 300px; display: inline-block; position: absolute; z-index: 999; margin-left: 4px;"
                        focus-me="item.showKey">
                    </td>
                    <td>{{ getRelativeDate(item.updated_at) }}</td>
                    <!--<td>-->
                    <!--<i class="glyphicon pointer" uib-tooltip="Toggle active status" ng-hide="item.loading" ng-click="toggleProperty(item, 'read_only_status')" ng-class="item.read_only_status && 'glyphicon-check' || 'glyphicon-unchecked'"></i>-->
                    <!--</td>-->
                    <!--<td>-->
                    <!--<i class="glyphicon pointer" uib-tooltip="Toggle active status" ng-hide="item.loading" ng-click="toggleProperty(item, 'active')" ng-class="item.active && 'glyphicon-check' || 'glyphicon-unchecked'"></i>-->
                    <!--</td>-->
                    <td class="actions">
                      <i class="glyphicon glyphicon-refresh spin" ng-if="item.loading"></i>
                      <!-- TODO: delete uisref or use full state name and delete ng-href-->
                      <a ng-href="#/keys/edit/{{item.id}}" uisref=".edit({id: item.id})" ng-if="!item.loading" uib-tooltip="Edit API Key">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                      <a href="" ng-if="!item.loading" ng-class="{'disabled': isReadOnly()}" ng-click="deleteKey(item)" uib-tooltip="Delete API Key">
                        <i class="glyphicon glyphicon-trash"></i>
                      </a>
                    </td>
                    <td ng-if="auth.isReseller() ||  auth.isRevadmin()">
                      <div class="company-name">{{item.companyName}}</div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <hr>
              <crud-pagination></crud-pagination>
            </div>
          </section>
          <!--  ==== WAF Rules ==================================================== -->
          <section ng-controller="WAFRulesCrudController" class="row accountresources--wafrules" ng-include="'parts/companies/account-resources/account-resources-wafrules.tpl.html'"></section>
        </div>
      </div>
    </div>
  </div>
</div>
