<script type="text/ng-template" id="confirmDisableGitHubIntegrationModal.html">
  <div class="modal-header">
    <h3 class="modal-title">Confirm</h3>
  </div>
  <div class="modal-body">
   Please confirm that you want to disable GitHub integration for the domain. The domain’s configuration will be set to the last configuration version loaded from GitHub. You still need to Update or Publish the configuration to deactivate the GitHub integration.
  </div>
  <div class="modal-footer">
    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    <button class="btn btn-danger" type="button" ng-click="ok()">OK</button>
  </div>
</script>

<script type="text/ng-template" id="gitHubIntegrationSettings.html">
  <div class="modal-header">
    <h3 class="modal-title">GitHub Integration Settings</h3>
  </div>
  <div class="modal-body">
     <form class="form-horizontal" name="editForm" novalidate>
         <div class="form-group" ng-class="{'has-error': editForm.newGitHubUrlDomainConfigurationFile.$invalid && editForm.newGitHubUrlDomainConfigurationFile.$dirty}">
                <label for="newGitHubUrlDomainConfigurationFile" class="col-sm-3 control-label">GitHub URL For Domain Configuration File *</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control inline-block" ng-disabled="_loading" validate-url-json-file ng-model="newGitHubIntegrationSettings.github_url" id="newGitHubUrlDomainConfigurationFile" name="newGitHubUrlDomainConfigurationFile" placeholder="GitHub URL" ng-maxlength="300" required>
                  <label for="newGitHubUrlDomainConfigurationFile" class="text-info" popover-append-to-body="false" popover-placement="left"  popover-trigger="mouseenter" uib-popover="Provide here a GitHub URL pointing to a JSON file holding the domain’s configuration. The initial version of the configuration file can be taken from the ‘Advanced Mode’ window.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.newGitHubUrlDomainConfigurationFile.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.newGitHubIntegrationSettings.$invalid && editForm.newGitHubIntegrationSettings.$dirty}">
                <label for="newGitHubIntegrationSettings" class="col-sm-3 control-label">GitHub Personal API Access Token *</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control inline-block" validate-github-personal-access-token ng-disabled="_loading" ng-model="newGitHubIntegrationSettings.github_personal_api_key" id="newGitHubIntegrationSettings" name="newGitHubIntegrationSettings" placeholder="GitHub Personal API Access Token" ng-maxlength="40" required>
                  <label for="newGitHubIntegrationSettings" class="text-info" popover-append-to-body="false" popover-placement="left"  popover-trigger="mouseenter" uib-popover="Specify here GitHub Personal API Access Token generated via GitHub's UI (page https://github.com/settings/tokens) and granted with permissions to access the domain configuration file">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.newGitHubIntegrationSettings.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
            </form>
</div>
  <div class="modal-footer">
    <button class="btn btn-warning" type="button" ng-click="cancelChanges()">Cancel</button>
    <button class="btn btn-danger" type="button" ng-disabled="_loading || editForm.$invalid" ng-click="onVerifyGitHubJSONConfig()"
    uib-tooltip="Click on the button to verify that the provided GitHub token can be used to access the specified domain configuration file. After that you still need to Update or Publish the configuration to activate the GitHub integration.">Verify</button>
  </div>
</script>



<div class="row">
  <div class="col-sm-12">
    <h2 class="pull-left page-title">
      Edit Domain <strong ng-if="modelInfo.domain_name">{{modelInfo.domain_name}}</strong>
    </h2>
  </div>
</div>
<div class="row" ng-init="getDomain(params.id)">
  <div class="col-md-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="row">
          <div class="col-md-12">
            <div class="pull-left">
              <a ui-sref="^" ng-disabled="_loading" class="btn btn-default">
                <i class="glyphicon glyphicon-arrow-left"></i>&nbsp; Back To List
              </a>
              <a href="" ng-show="isAdvancedMode==false || isAdvancedMode=='false' " ng-click="onChangeModeView()" ng-disabled="_loading" class="btn btn-info">
                <i class="icon-revapm-cogs"></i>&nbsp; Advanced Mode
              </a>
              <a href="" ng-show="isAdvancedMode==true || isAdvancedMode=='true' " ng-click="onChangeModeView()" ng-disabled="_loading" class="btn btn-info">
                <i class="glyphicon glyphicon-cog"></i>&nbsp; Basic Mode
              </a>
              <div class="inline-block spaced-button">
               <label class="title">GitHub Integration :</label>
                <toggle-switch id="switch_github_integration" name="githubIntegrationEneble" is-disabled="_loading" ng-model="model.github_integration.enable"
                  on-label="On" off-label="Off" ng-change="onChangeManageGitHubIntegration($event)">
                </toggle-switch>
                <label for="githubIntegrationEneble" class="text-info" popover-append-to-body="{{true}}" popover-placement="bottom" popover-trigger="mouseenter" uib-popover="Instead of managing the domain’s configuration via the admin UI or customer API you can place it in a GitHub-hosted JSON
                file and connect the file to the domain. After enabling the GitHub integration you will be able to see the
                domain’s configuration via the UI in read-only mode.">
                  <i class="fa fa-question-circle"></i>
                </label>
                <button ng-click="onManageGitHubIntegration($event)" class="btn btn-primary spaced-button" ng-class="{'btn-disabled':isReadOnly() || model.github_integration.enable !=true }" ng-disabled="_loading || isReadOnly() || model.github_integration.enable !=true"
                  popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover=" ">
                    <i class="fa fa-lock"></i>&nbsp;Manage GitHub Integration
                  </button>
              </div>
            </div>
            <div>
              <button class="btn btn-primary pull-right" ng-disabled="_loading" uib-tooltip="Refresh" ng-click="refreshPage($event,params.id)">
                <i class="glyphicon glyphicon-refresh" ng-class="_loading ? 'glyphicon-refresh spin': 'glyphicon-refresh'"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <!-- Display data in Advanced Mode-->
        <div class="form-horizontal" ng-show="isAdvancedMode==true || isAdvancedMode=='true' ">
          <div name="json" class="col-md-12 domains-advanced-mode-edit" id="json" ng-model="modelAdvance" options="jsoneditor.options" ng-jsoneditor="jsonEditorEvent" style="height: 550px; padding-left: 0;"></div>
          <div class="form-group">
            <label class="col-sm-3 control-label" style="margin-top: 15px;">Current Publishing Status</label>
            <div class="col-md-9 control-label" style="text-align:left;margin-top: 15px;" interval="DOMAIN_STATUS_REFRESH_INTERVAL_EDIT_FORM" domain-staging-status ng-id="modelInfo.status_domain_id"></div>
          </div>
          <div class="form-group ">
            <div class="col-sm-offset-2 col-sm-10">
              <a ui-sref="^" class="btn btn-default">
                <i class="glyphicon glyphicon-remove"></i>&nbsp; Cancel
              </a>
              <button class="btn btn-info" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="_loading || jsonIsInvalid || isReadOnly()" ng-click="validateDomain(modelAdvance)">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-check'"></i>&nbsp; Verify
              </button>
              <button class="btn btn-success" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="_loading || jsonIsInvalid || isReadOnly()" ng-click="updateDomain(modelAdvance)" uib-tooltip="{{domain_update_help_info}}">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-file'"></i>&nbsp; Update
              </button>
              <button class="btn btn-success" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="_loading || jsonIsInvalid || isReadOnly()" ng-click="publishDomain(modelAdvance)">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-ok'"></i>&nbsp; Publish
              </button>
            </div>
          </div>
        </div>
        <form class="form-horizontal domain-edit-form" name="editForm" novalidate ng-show="isAdvancedMode==false || isAdvancedMode=='false'">
          <!-- Display data in Basic Mode -->
          <uib-tabset active="active">
            <uib-tab index="0" heading="General Settings" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Use the tab to configure general domain settings like name and location of web origin, data transfer timeouts, etc">
              <div class="form-group" ng-class="{'has-error': editForm.app_name.$invalid && editForm.app_name.$dirty}">
                <label for="domainName" class="col-sm-3 control-label" popover-trigger="mouseenter">Domain Name</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control inline-block" disabled autofocus ng-model="modelInfo.domain_name" id="domain_name" name="domainName" placeholder="Domain Name">
                  <label for="domainName" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This is the primary domain name associated with the configuration. The name cannot be changed. You can specify additional domain names (aliases) in the 'Non-Wildcard Domain Aliases' and 'Wildcard Domain Alias' fields below.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.cname.$invalid && editForm.cname.$dirty}">
                <label for="cname" class="col-sm-3 control-label" popover-trigger="mouseenter">Domain CNAME</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control inline-block" disabled ng-model="modelInfo.cname" id="cname" name="cname" placeholder="Domain CNAME">
                  <label for="cname" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="The DNS name is managed by the CDN and should be used by the customer to point the primary domain name and domain aliases to the CDN.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <button class="btn btn-primary btn-copy--cname" clipboard text="modelInfo.cname" on-copied="copyCallback()" on-error="copyCallback(err)" style="vertical-align: initial;" uib-tooltip="Click to copy the CNAME to the clipboard" tooltip-placement="top"><i class="fa fa-files-o"></i></button>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.accountId.$invalid && editForm.accountId.$dirty}" ng-if="auth.isReseller() || auth.isRevadmin()">
                <label for="accountId" class="col-sm-3 control-label">Account</label>
                <div class="col-sm-9">
                  <ui-select ng-model="model.account_id" theme="select2" ng-animate-disabled ng-disabled="_loading || _isEditLocked" on-select="onAccountSelect($model)" style="min-width: 550px;" id="account_id" name="accountId" required>
                    <ui-select-match placeholder="Select Account">{{$select.selected.companyName}}</ui-select-match>
                    <ui-select-choices repeat="item.id as item in companies | filter: {companyName: $select.search}">
                      <div ng-bind-html="item.companyName|highlight: $select.search"></div>
                    </ui-select-choices>
                  </ui-select>
                  <label for="accountId" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Select a company name that the domain should be associated with">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.accountId.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.originServer.$invalid && editForm.originServer.$dirty}">
                <label for="originServer" class="col-sm-3 control-label">Origin Server Name/IP *</label>
                <div class="col-sm-9">
                  <input type="text" validate-origin-server-name class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_server" id="originServer" name="originServer" placeholder="Origin Server Name" ng-maxlength="150" required>
                  <label for="originServer" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Enter here a domain name or IP address of the origin web server">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.originServer.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.originHostHeader.$invalid && editForm.originHostHeader.$dirty}">
                <label class="col-sm-3 control-label" for="originHostHeader">Origin Host Header *</label>
                <div class="col-sm-9">
                  <input type="text" validate-domain-name class="form-control inline-block" ng-model="model.origin_host_header" ng-disabled="_loading || _isEditLocked" id="origin_host_header" name="originHostHeader" placeholder="Origin Host Header" ng-maxlength="150" required>
                  <label for="originHostHeader" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Enter here a domain name to be used in the 'Host' header of requests sent to the origin server. The name might be different from the origin server name/IP specified above. For example, if the origin server IP is 11.11.11.11 and the origin HTTP server recognizes web requests for domain 'www.example.com', you will need to specify '11.11.11.11' in origin server name field above and 'www.example.com' in this field.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.originHostHeader.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': editForm.originServerLocationId.$invalid && editForm.originServerLocationId.$dirty}">
                <label for="originServerLocationId" class="col-sm-3 control-label">Domain Origin Location</label>
                <div class="col-sm-9">
                  <select class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_server_location_id" id="origin_server_location_id" name="originServerLocationId" ng-options="obj.id as obj.locationName for obj in locations | orderBy:'locationName'" required="">
                    <option value="">--- Select Location ---</option>
                  </select>
                  <label for="originServerLocationId" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Select a location closest to the location of the origin server">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.originServerLocationId.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <!-- Enhanced Traffic Analytics -->
              <div class="form-group form-inline">
                <label for="enableEnhancedAnalytics" class="col-sm-3 control-label">
                  Enhanced Traffic Analytics
                </label>
                <div class="col-md-9">
                  <toggle-switch id="enableEnhancedAnalytics" name="enableEnhancedAnalytics" is-disabled="_loading || _isEditLocked" ng-model="model.enable_enhanced_analytics" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enableEnhancedAnalytics" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="By enabling Enhanced Traffic Analytics feature for the domain, you will get access to a wide range of information regarding your end users">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- Origin Communication Protocol -->
              <div class="form-group form-inline">
                <label for="origin_secure_protocol" class="col-sm-3 control-label">
                  Origin Communication Protocol
                </label>
                <div class="col-md-9">
                  <label class="radio-inline">
                    <input id="useEndUserProtocol" type="radio" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_secure_protocol" value="use_end_user_protocol">Use End User Protocol
                  </label>
                  <label class="radio-inline">
                    <input id="httpsOnly" type="radio" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_secure_protocol" value="https_only">HTTPS Only
                  </label>
                  <label class="radio-inline">
                    <input id="httpOnly" type="radio" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_secure_protocol" value="http_only">HTTP Only
                  </label>
                  <label for="origin_secure_protocol" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This option controls whether SSL/TLS protection will be applied to origin requests. The default option 'Use End User Protocol' instructs the CDN to use in its origin call the same security protocol that is used by end user. For example, if the end user sends a plain unprotected HTTP request, the origin call is also in plain HTTP.  Similarly, if the end user sends HTTPS request, the origin call is also in HTTPS. Option 'HTTPS Only' forces all origin requests to be made using HTTPS protocol. Option 'HTTP Only' forces the CDN to use plain HTTP even if the end user requests are encrypted.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- // -->
              <!-- "Non-Wildcard Domain Aliases" -->
              <div class="form-group" ng-class="{'has-error': editForm.domainAliases.$invalid && editForm.domainAliases.$dirty}">
                <label for="domainAliases" class="col-sm-3 control-label">Non-Wildcard Domain Aliases</label>
                <div class="col-sm-9">
                  <ui-select id="non-Wildcard-Domain-Aliases" validate-domains-list tagging tagging-label="Add New Domain" multiple tagging-tokens="SPACE|," theme="bootstrap" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.domain_aliases" name="domainAliases">
                    <ui-select-match placeholder="Add domains...">{{$item}}</ui-select-match>
                    <ui-select-choices repeat="domain in model.domain_aliases">
                      {{domain}}
                    </ui-select-choices>
                  </ui-select>
                  <label for="domainAliases" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Specify here one or more aliases of the domain. For example, if the domain name is 'example.com' and you specify here alias 'www.example.com', our network will accept requests for both domains and apply to them the same domain configuration.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.domainAliases.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <!-- // -->
              <!-- Wildcard Domain Alias -->
              <div class="form-group" ng-class="{'has-error': editForm.domainWildcardAlias.$invalid && editForm.domainWildcardAlias.$dirty}">
                <label for="domainWildcardAlias" class="col-sm-3 control-label">Wildcard Domain Alias</label>
                <div class="col-md-9">
                  <input validate-wildcard-domain-field type="text" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" id="domain_wildcard_alias" name="domainWildcardAlias" ng-model="model.domain_wildcard_alias" ng-maxlength="150" placeholder="Wildcard Domain Alias">
                  <label for="domainWildcardAlias" class="text-info" popover-trigger="mouseenter" uib-popover="You can specify here a domain alias in a wildcard format. For example, if you specify '*.example.com' name, we will accept and apply the same configuration for domains like 'www.example.com', 'www2.example.com', 'app.example.com', etc. Please note that we will not show Web Analytics stats for domains matching the wildcard alias but will count the traffic for billing purposes.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.domainWildcardAlias.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <!-- -->
              <!-- Data Read Timeout, seconds -->
              <div class="form-group form-inline" ng-class="{'has-error': editForm.proxyTimeout.$invalid && editForm.proxyTimeout.$dirty}">
                <label for="proxyTimeout" class="col-sm-3 control-label">Data Read Timeout</label>
                <div class="col-md-9">
                  <input type="number" id="proxy_timeout" name="proxyTimeout" class="form-control inline-block" ng-disabled="_loading" ng-model="model.proxy_timeout" ng-min="1" ng-max="3600" required> second(s)
                  <label for="proxyTimeout" class="text-info" popover-trigger="mouseenter" uib-popover="Proxy data read timeout in seconds (1-3600 range)">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.proxyTimeout.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <!-- -->
              <!-- Last Mile QUIC Protocol -->
              <div class="form-group form-inline">
                <label for="enable_quic" class="col-sm-3 control-label">
                  Last Mile QUIC Protocol
                </label>
                <div class="col-md-9">
                  <toggle-switch id="lastMileQUICprotocol" name="enable_quic" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.enable_quic" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enable_quic" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This switch controls whether QUIC-enabled browsers (like Google's Chrome) will be allowed to use modern QUIC protocol instead of HTTP2 for data transfer. QUIC protocol provides significant network performance benefits.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- Block All Web Crawlers  -->
              <div class="form-group form-inline">
                <label for="block_crawlers" class="col-sm-3 control-label">
                  Block All Web Crawlers
                </label>
                <div class="col-md-9">
                  <toggle-switch id="blockAllWebCrawlers" name="block_crawlers" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.block_crawlers" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="block_crawlers" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Use the switch to force the CDN to override the origin-provided /robots.txt file with a file disabling all web crawlers to access the website. This feature might be useful if you board a website on the platform but use a different domain name.  This will prevent search engines to catalog the same content under different domain names.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- RUM Data Collection  -->
              <div class="form-group form-inline">
                <label for="enable_rum" class="col-sm-3 control-label">
                  RUM Data Collection
                </label>
                <div class="col-md-9">
                  <toggle-switch id="runDataCollection" name="enable_rum" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_co.enable_rum" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enable_rum" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Use the switch to enable the injection of RUM data collection JavaScript into served HTML pages">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- RUM Data Collection  -->
              <div class="form-group form-inline">
                <label for="enable_decompression" class="col-sm-3 control-label">
                  Decompress Objects Fetched <br/>From The Origin
                </label>
                <div class="col-md-9">
                  <toggle-switch id="enableDecompression" name="enable_decompression" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_co.enable_decompression" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enable_decompression" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Controls whether first-mile proxy servers should decompress content fetched from the origin server. The default value is On. The switch should be in On position for 'RUM Data Collection' and '3rd-party Links' features to work.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <div class="form-group" ng-class="{ 'has-error': editForm.comment.$invalid &&  editForm.comment.$dirty }">
                <label for="comment" class="col-sm-3 control-label">Comment</label>
                <div class="col-md-9">
                  <div class="col-sm-12 form-group">
                    <textarea id="comment" name="comment" placeholder="Comment (300 characters max)" ng-maxlength="300" class="form-control inline-block" ng-model="model.comment" ng-pattern="COMMENT_NO_SPECIAL_CHARS" ng-disabled="_loading || _isEditLocked">
                    </textarea>
                    <label for="comment" class="text-info" popover-trigger="mouseenter" uib-popover="Enter a free-text comment about the web domain (300 characters max)">
                      <i class="fa fa-question-circle"></i>
                    </label>
                  </div>
                  <div class="error-messages" ng-messages="editForm.comment.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <hr>
              <!--  Third-party integrations -->
              <div class="form-group" ng-class="{'has-error': editForm.bttKey.$invalid && editForm.bttKey.$dirty}">
                <label for="third-party-integrations" class="col-sm-3 control-label">
                  Blue Triangle Tech. Key
                </label>
                <div class="col-md-9">
                  <input id="blueTriangleTechKey" type="text" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" name="bttKey" ng-model="model.btt_key" placeholder="BTT API key for the domain" ng-pattern="/^[0-9a-fA-F]{32}$/">
                  <label for="bttKey" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="If the domain is also provisioned in Blue Triangle Technologies' platform, it is possible to specify here the domain's BTT ID. This will allow you to see the domain's business reports in the Dashboard section.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.bttKey.$error" role="alert" ng-messages-multiple>
                    <div ng-message="pattern" class="alert-text alert-text--pattern">The BTT key format is not correct</div>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <hr>
            </uib-tab>
            <uib-tab index="1" heading="Origin Health Monitoring" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="You can manage here whether we should monitor the origin health status and what monitoring parameters to use">
              <!-- BLOCK Origin Health Monitoring -->
              <div class="form-group form-inline">
                <label for="enable_cache" class="col-sm-3 control-label">Origin Health Monitoring</label>
                <div class="col-md-9">
                  <toggle-switch id="originHealthMonitoring" is-disabled="_loading || _isEditLocked || (model.rev_component_bp.enable_cache==false || model.rev_component_bp.enable_cache=='false')" ng-model="model.enable_origin_health_probe" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enable_cache" class="text-info" popover-trigger="mouseenter" uib-popover="Enables regular monitoring of origin health and fine-grained control on serving of expired (stale) cached objects in case of origin failures. This functionality requires Edge Caching feature enabled.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <div class="panel panel-default" ng-if="model.enable_origin_health_probe == true && model.rev_component_bp.enable_cache == true">
                <div class="panel-body">
                  <!--  Origin Monitoring HTTP Request-->
                  <div class="form-group" ng-class="{'has-error': editForm.originHealthProbeHTTP_REQUEST.$invalid && editForm.originHealthProbeHTTP_REQUEST.$dirty}">
                    <label for="third-party-integrations" class="col-sm-3 control-label">Origin Monitoring HTTP Request</label>
                    <div class="col-md-9">
                      <input id="originMonitoringHTTPrequest" type="text" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" name="originHealthProbeHTTP_REQUEST" ng-model="model.origin_health_probe.HTTP_REQUEST" placeholder="Text like 'GET / HTTP/1.1' (300 characters max)" ng-maxlength="300" characters required>
                      <label for="third-party-integrations" class="text-info" popover-trigger="mouseenter" uib-popover="This string will be sent to the origin HTTP server after connecting to ports 80 and 443. Default value ‘GET / HTTP/1.1’ will work in majority of cases.">
                        <i class="fa fa-question-circle"></i>
                      </label>
                      <div class="error-messages" ng-messages="editForm.originHealthProbeHTTP_REQUEST.$error" role="alert" ng-messages-multiple>
                        <div ng-messages-include="parts/shared/error-messages.html"></div>
                      </div>
                    </div>
                  </div>
                  <!--  // Origin Monitoring HTTP Request-->
                  <!--  Probe Timeout-->
                  <div class="form-group form-inline" ng-class="{'has-error': editForm.originHealthProbePROBE_TIMEOUT.$invalid && editForm.originHealthProbePROBE_TIMEOUT.$dirty}">
                    <label for="originHealthProbePROBE_TIMEOUT" class="col-sm-3 control-label">Probe Timeout</label>
                    <div class="col-md-9">
                      <input type="number" id="probe_timeout" name="originHealthProbePROBE_TIMEOUT" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_health_probe.PROBE_TIMEOUT" ng-min="1" ng-max="60" required> second(s)
                      <label for="originHealthProbePROBE_TIMEOUT" class="text-info" popover-trigger="mouseenter" uib-popover="Defines for how long the proxy will wait for the origin to respond on monitoring HTTP request (1-60 range)">
                        <i class="fa fa-question-circle"></i>
                      </label>
                      <div class="error-messages" ng-messages="editForm.originHealthProbePROBE_TIMEOUT.$error" role="alert" ng-messages-multiple>
                        <div ng-messages-include="parts/shared/error-messages.html"></div>
                      </div>
                    </div>
                  </div>
                  <!--  Probe Interval -->
                  <div class="form-group form-inline" ng-class="{'has-error': editForm.originHealthProbePROBE_INTERVAL.$invalid && editForm.originHealthProbePROBE_INTERVAL.$dirty}">
                    <label for="originHealthProbePROBE_INTERVAL" class="col-sm-3 control-label">Probe Interval</label>
                    <div class="col-md-9">
                      <input type="number" id="origin_health_probe_PROBE_INTERVAL" name="originHealthProbePROBE_INTERVAL" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_health_probe.PROBE_INTERVAL" ng-min="1" ng-max="1800" required> second(s)
                      <label for="originHealthProbePROBE_INTERVAL" class="text-info" popover-trigger="mouseenter" uib-popover="Defines the interval in seconds between origin monitoring checks (1-1800 range)">
                        <i class="fa fa-question-circle"></i>
                      </label>
                      <div class="error-messages" ng-messages="editForm.originHealthProbePROBE_INTERVAL.$error" role="alert" ng-messages-multiple>
                        <div ng-messages-include="parts/shared/error-messages.html"></div>
                      </div>
                    </div>
                  </div>
                  <!--  Expected HTTP Response Code-->
                  <div class="form-group form-inline" ng-class="{'has-error': editForm.originHealthProbeHTTP_STATUS.$invalid && editForm.originHealthProbeHTTP_STATUS.$dirty}">
                    <label for="originHealthProbeHTTP_STATUS" class="col-sm-3 control-label">Expected HTTP Response Code</label>
                    <div class="col-md-9">
                      <input type="number" id="expectedHTTPresponseCode" name="originHealthProbeHTTP_STATUS" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.origin_health_probe.HTTP_STATUS" ng-min="100" ng-max="599" required>
                      <label for="originHealthProbeHTTP_STATUS" class="text-info" popover-trigger="mouseenter" uib-popover="The origin server should respond with this HTTP status code to be considered healthy (range 100-599)">
                        <i class="fa fa-question-circle"></i>
                      </label>
                      <div class="error-messages" ng-messages="editForm.originHealthProbeHTTP_STATUS.$error" role="alert" ng-messages-multiple>
                        <div ng-messages-include="parts/shared/error-messages.html"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--  //BLOCK Origin Health Monitoring -->
              <hr>
            </uib-tab>
            <uib-tab index="2" heading="Edge Caching" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This tab allows you to manage edge caching rules for acceleration of static content like images, video, JS and CSS files">
              <!-- Edge Caching -->
              <div class="form-group form-inline">
                <label for="enable_cache" class="col-sm-3 control-label">
                  Edge Caching
                </label>
                <div class="col-md-9">
                  <toggle-switch id="edgeCaching" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.enable_cache" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enableb_cache" class="text-info" popover-trigger="mouseenter" uib-popover="This switch controls whether edge caching functionality will be enabled for the domain. It is not enough just to enable the switch. You also need to specify proper caching rules.  The default caching rule will properly handle the majority of use-cases. Edge caching is also required to support ESI feature.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- Cache Bypass Locations -->
              <div class="form-group" ng-if="model.rev_component_bp.enable_cache" ng-class="{'has-error': editForm.cacheBypassLocations.$invalid && editForm.cacheBypassLocations.$dirty}">
                <label for="cacheBypassLocations" class="col-sm-3 control-label">Cache Bypass Locations</label>
                <div class="col-sm-9">
                  <ui-select validate-cache-bypass-locations tagging tagging-label="Add Cache Bypass Locations" multiple tagging-tokens="SPACE|," theme="bootstrap" class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.cache_bypass_locations" name="cacheBypassLocations" id="cacheBypassLocations">
                    <ui-select-match placeholder="Add Cache Bypass Locations...">{{$item}}</ui-select-match>
                    <ui-select-choices repeat="bypass_locations in model.rev_component_bp.cache_bypass_locations">
                      {{bypass_locations}}
                    </ui-select-choices>
                  </ui-select>
                  <label for="cache_bypass_locations" class="text-info" popover-trigger="mouseenter" uib-popover="Specify here global URLs/locations which should not have any of the edge caching rules applied to them. Please note that ESI feature will be not available for these locations.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <div class="error-messages" ng-messages="editForm.cacheBypassLocations.$error" role="alert" ng-messages-multiple>
                    <div ng-messages-include="parts/shared/error-messages.html"></div>
                  </div>
                </div>
              </div>
              <!-- -->
              <!-- Caching Rules -->
              <div id="cachingRulesBlock" class="panel panel-default caching-rules-list" ng-if="model.rev_component_bp.enable_cache">
                <div class="panel-heading">
                  <span class="pull-left panel-buttons-left">
                    <a class="btn btn-default btn-md " ng-click="onCollapsAllCachingRule()" title="Collapse All Rules" ng-show="!isCollapsedAll">
                      <i class="glyphicon glyphicon-chevron-up "></i>
                    </a>
                    <a class="btn btn-default btn-md " ng-click="onExpandAllCachingRule()" title="Expand All Rules">
                      <i class="glyphicon glyphicon-chevron-down"></i>
                    </a>
                  </span>
                  <div class="form-group pull-right">
                    <div class="col-sm-12">
                      <a ng-click="onAddNewCachingRule($event,true)" class="btn btn-primary btn-sm " uib-tooltip="Use the button to add a new caching rule to cache JPG, JPEG, PNG, GIF, WEBP, JS, CSS, WOFF, WOFF2, MP4, SWF, AVI, MPEG and MOV objects for a period of 2 weeks. You can modify the rule to suit your needs."><i class="glyphicon"></i>Cache Static Objects</a>
                      <a id="addNewCachingRulesBlock" ng-click="onAddNewCachingRule($event)" class="btn btn-primary btn-sm " title="Add New Caching Rule addNewBackendBlock"><i class="glyphicon glyphicon-plus"></i>&nbsp;</a>
                    </div>
                  </div>
                  <h4><b>Caching Rules</b></h4>
                </div>
                <div class="panel-body">
                  <!-- TODO: creater directive -->
                  <div class="panel panel-default domain-caching-rules cachingRulesURLblock" ng-repeat="caching_rule in model.rev_component_bp.caching_rules">
                    <div class="panel-heading">
                      <div class="domain-caching-rules__info">
                        <div class="pull-left panel-buttons-left">
                          <!-- collapse -->
                          <a class="btn btn-default btn-xs" href="" title="Collapse Caching Rule" ng-show="!caching_rule.$$cachingRuleState.isCollapsed" ng-click="caching_rule.$$cachingRuleState.isCollapsed = !caching_rule.$$cachingRuleState.isCollapsed">
                            <i class="glyphicon glyphicon-chevron-up"></i>
                          </a>
                          <!-- expend -->
                          <a class="btn btn-default btn-xs" href="" title="Expand Caching Rule" ng-show="caching_rule.$$cachingRuleState.isCollapsed" ng-click="caching_rule.$$cachingRuleState.isCollapsed = !caching_rule.$$cachingRuleState.isCollapsed">
                            <i class="glyphicon glyphicon-chevron-down"></i>
                          </a>
                          <!--  Caching Rule Up  -->
                          <a class="btn btn-default btn-xs" href="" ng-click="onUpCachingRule(caching_rule)"><i class="glyphicon glyphicon-arrow-up" title="Move One Position Up"></i></a>
                          <!--  Caching Rule Down  -->
                          <a class="btn btn-default btn-xs" href="" ng-click="onDownCachingRule(caching_rule)"><i class="glyphicon glyphicon-arrow-down" title="Move One Position Down"></i></a>
                          <!-- // -->
                        </div>
                        <div class="pull-right panel-button-right">
                          <!-- remove widget -->
                          <a href="" title="Remove Rule" ng-click="onRemoveCachingRule($index)" ng-if="!editMode">
                            <i class="glyphicon glyphicon-remove"></i>
                          </a>
                        </div>
                        <div class="panel-title">
                          <i class="icon-revapm-icon-regex" ng-if="!caching_rule.url.is_wildcard"></i>
                          <i class="icon-revapm-files-empty" ng-if="caching_rule.url.is_wildcard"></i>
                          <b>URL</b>: {{caching_rule.url.value}}
                        </div>
                      </div>
                    </div>
                    <domain-caching-rule class="panel-body" ng-model="caching_rule" ng-show="!caching_rule.$$cachingRuleState.isCollapsed"></domain-caching-rule>
                  </div>
                </div>
              </div>
              <hr>
            </uib-tab>
            <uib-tab index="3" heading="SSL Configuration" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Use the tab to enable/disable SSL support for the domain and manage which SSL certificate to use and which SSL protocols and cipher settings to apply for received SSL requests">
              <!--  “SSL Configuration” -->
              <div class="form-group form-inline">
                <label for="enable_ssl" class="col-sm-3 control-label">
                  Accept SSL Requests
                </label>
                <div class="col-md-9">
                  <toggle-switch id="acceptSSLrequests" name="enable_ssl" is-disabled="_loading || _isEditLocked" ng-model="model.enable_ssl" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enable_ssl" class="text-info" popover-trigger="mouseenter" uib-popover="Select whether we should accept HTTPS (SSL) requests for the domain">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- //  “SSL Configuration” -->
              <!-- Attached SSL Certificate-->
              <div class="form-group" ng-class="{'has-error': editForm.sslCertId.$invalid && editForm.sslCertId.$dirty}">
                <label for="sslCertId" class="col-sm-3 control-label">SSL Certificate</label>
                <div class="col-sm-9">
                  <select class="form-control inline-block" ng-disabled="_loading || _isEditLocked" ng-model="model.ssl_cert_id" id="ssl_cert_id" name="sslCertId" ng-options="obj.id as obj.cert_name for obj in SSL_certs | filter :{account_id:model.account_id}">
                    <option value="">Default SSL Certificate</option>
                  </select>
                  <label for="sslCertId" popover-append-to-body="{{true}}" class="text-info" popover-trigger="mouseenter" uib-popover="Select SSL certificate which should be associated with the domain. Option 'Default SSL Certificate' provides you with the ability to use shared SSL certificate issued by GlobalSign CA and managed in section 'SSL Names'.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                  <a id="manageSSLcertificates" ui-sref="index.webApp.ssl_certs" class="btn btn-primary pull-right"><i class="fa fa-lock"></i> Manage SSL Certificates</a>
                </div>
              </div>
              <!-- -->
              <div class="ssl-certificate-configuration">
                <div class="panel panel-default ">
                  <div class="panel-body form">
                    <div class="col-md-5">
                      <div class="form-group ">
                        <div class="col-sm-12">
                          <div class="checkbox">
                            <label>
                              <input id="predefinedSSLconfigurationProfile" type="radio" class="inline-block" name="isCustomSSL_conf_profile" ng-model="isCustomSSL_conf_profile" ng-value="false"> Predefined SSL Configuration Profile
                              <label for="isCustomSSL_conf_profile" popover-append-to-body="{{true}}" class="text-info" popover-trigger="mouseenter" uib-popover="Select the radio-button to use one of the pre-defined SSL configuration profiles (recommended)">
                                <i class="fa fa-question-circle"></i>
                              </label>
                            </label>
                          </div>
                        </div>
                      </div>
                      <div class="form-group form-inline" ng-class="{'has-error': editForm.sslConfProfile.$invalid && editForm.sslConfProfile.$dirty}">
                        <select class="form-control col-sm-offset-3" ng-disabled="_loading || _isEditLocked || (isCustomSSL_conf_profile == true)" ng-model="model.ssl_conf_profile" id="ssl_conf_profile" name="sslConfProfile" ng-options="obj.id as obj.profile_name for obj in SSL_conf_profiles" required>
                        </select>
                        <div class="error-messages" ng-messages="editForm.sslConfProfile.$error" role="alert" ng-messages-multiple>
                          <div ng-messages-include="parts/shared/error-messages.html"></div>
                        </div>
                      </div>
                      <div class="form-group ">
                        <div class="col-sm-12">
                          <div class="checkbox">
                            <label>
                              <input id="customSSLconfigurationProfile" type="radio" ng-model="isCustomSSL_conf_profile" name="isCustomSSL_conf_profile" ng-value="true"> Custom SSL Configuration Profile
                              <label for="isCustomSSL_conf_profile" popover-append-to-body="{{true}}" class="text-info" popover-trigger="mouseenter" uib-popover="Select the option to define your own SSL configuration options">
                                <i class="fa fa-question-circle"></i>
                              </label>
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Right section -->
                    <div class="col-md-7">
                      <div class="form-group" ng-disabled="isCustomSSL_conf_profile || _isEditLocked" ng-class="{'has-error': editForm.sslProtocols.$invalid && editForm.sslProtocols.$dirty}">
                        <label for="sslProtocols" class="col-sm-12">
                          Allowed SSL Protocols <small>(in Nginx format)</small></label>
                        <div class="col-sm-12">
                          <input type="text" class="form-control inline-block" ng-disabled="!isCustomSSL_conf_profile || _isEditLocked" ng-model="model.ssl_protocols" id="ssl_protocols" name="sslProtocols" ng-maxlength="200" placeholder="SSL Protocols" required>
                          <label for="sslProtocols" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Allowed SSL protocols">
                            <i class="fa fa-question-circle"></i>
                          </label>
                          <div class="error-messages" ng-messages="editForm.sslProtocols.$error" role="alert" ng-messages-multiple>
                            <div ng-messages-include="parts/shared/error-messages.html"></div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group" ng-class="{'has-error': editForm.sslCiphers.$invalid && editForm.sslCiphers.$dirty}">
                        <label for="sslCiphers" class="col-sm-12">
                          Allowed SSL Ciphers
                          <small>(in Nginx format)</small></label>
                        <div class="col-sm-12">
                          <input type="text" class="form-control inline-block" ng-disabled="!isCustomSSL_conf_profile || _isEditLocked" ng-model="model.ssl_ciphers" id="ssl_ciphers" name="sslCiphers" ng-maxlength="200" placeholder="SSL Ciphers" required>
                          <label for="sslCiphers" popover-append-to-body="{{true}}" class="text-info" popover-trigger="mouseenter" uib-popover="Allowed SSL ciphers">
                            <i class="fa fa-question-circle"></i>
                          </label>
                          <div class="error-messages" ng-messages="editForm.sslCiphers.$error" role="alert" ng-messages-multiple>
                            <div ng-messages-include="parts/shared/error-messages.html"></div>
                          </div>
                        </div>
                      </div>
                      <div class="checkbox">
                        <label popover-trigger="mouseenter">
                          <input type="checkbox" ng-disabled="!isCustomSSL_conf_profile || _isEditLocked" ng-model="model.ssl_prefer_server_ciphers" id="ssl_prefer_server_ciphers" placeholder="Prefer Server-Side Ciphers"><strong> Prefer Server-Side Ciphers</strong></label>
                        <label for="ssl_prefer_server_ciphers" class="text-info" popover-trigger="mouseenter" uib-popover="Specifies that server ciphers should be preferred over client ciphers">
                          <i class="fa fa-question-circle"></i>
                        </label>
                      </div>
                    </div>
                    <!-- // Right section-->
                  </div>
                </div>
              </div>
              <hr>
            </uib-tab>
            <uib-tab index="4" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Use the tab to manage what category of end users can access the website based on country, IP address or request HTTP header
          value">
              <!--  "Access Control Lis(ACL)" -->
              <uib-tab-heading>ACL</uib-tab-heading>
              <div class="form-group form-inline">
                <label for="enableACLRules" class="col-sm-3 control-label">Access Control List</label>
                <div class="col-md-9">
                  <toggle-switch id="enable_acl_rules" name="enableACLRules" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.acl.enabled"
                    on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enableACLRules" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This switch controls whether ACL functionality is enabled for the domain">
                                <i class="fa fa-question-circle"></i>
                              </label>
                </div>
              </div>
              <div class="row" ng-if="model.rev_component_bp.acl.enabled">
                <div class="panel-body">
                  <!-- ACL list-->
                  <div class="panel panel-default panel-body">
                      <div class="col-sm-12">
                        <div class="checkbox">
                          <label>
                                <input id="aclAction" type="radio" ng-disabled="_loading || _isEditLocked" class="inline-block" name="aclAction" ng-model="model.rev_component_bp.acl.action" ng-value="'deny_except'"> Allow Only End User Requests Matching Any Of Specified Conditions (Deny All Other Requests)
                          </label>
                        </div>
                      </div>
                      <div class="col-sm-12">
                        <div class="checkbox">
                          <label>
                                <input id="aclAction" type="radio" ng-disabled="_loading || _isEditLocked" class="inline-block" name="aclAction" ng-model="model.rev_component_bp.acl.action" ng-value="'allow_except'"> Deny Only End User Requests Matching Any Of Specified Conditions (Allow All Other Requests)
                          </label>
                        </div>
                      </div>
                  </div>
                  <domain-acl-rules-list id="aclRulesListBlock" ng-model="model.rev_component_bp.acl.acl_rules" is-edit-locked="_isEditLocked"></domain-acl-rules-list>
                </div>
              </div>
              <!-- //  "Access Control Lis(ACL)" -->
              <hr>
            </uib-tab>
            <uib-tab index="5" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This tab is used to manage Web Application Firewall (WAF) settings for the domain">
              <!--  “WAF” -->
              <uib-tab-heading>WAF <i class="label label-primary pull-right fa beta-functional" aria-hidden="true"> Beta</i></uib-tab-heading>
              <div class="form-group form-inline">
                <label for="enableWafRules" class="col-sm-3 control-label">WAF Protection</label>
                <div class="col-md-9">
                  <toggle-switch id="enable_waf_rules" name="enableWafRules" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.enable_waf" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enableWafRules" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This switch controls the global WAF functionality for the domain. If you move it to the OFF state, the WAF feature will be completely disabled for the domain (but all existing WAF configuration will stay in place so you can easily re-enable it later). If you enable WAF for the first time, you still need to do additional configuration steps for WAF to actually protect the website.">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <!-- WAF Locations list-->
              <domain-waf-locations id="wafLocationsBlock" account-id="{{model.account_id}}" ng-if="model.rev_component_bp.enable_waf" ng-model="model.rev_component_bp.waf"></domain-waf-locations>
              <!-- //  “WAF” -->
              <hr>
            </uib-tab>
            <uib-tab index="6" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Here you can manage Bot Protection configuration for the domain. The service is powered by our partner ShieldSquare.">
              <!--  “Bot Protection” -->
              <uib-tab-heading>Bot Protection <i class="label label-primary pull-right fa beta-functional" aria-hidden="true"> Beta</i></uib-tab-heading>
              <div class="form-group form-inline">
                <label for="enableBotProtection" class="col-sm-3 control-label">Bot Protection</label>
                <div class="col-md-9">
                  <toggle-switch id="enable_bot_protection" name="enableBotProtection" is-disabled="_loading || _isEditLocked" ng-model="model.rev_component_bp.enable_bot_protection"
                    on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="enableBotProtection" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This is a general switch for Bot Protection feature. After enabling the feature you will need to do some additional configuration changes.">
                      <i class="fa fa-question-circle"></i>
                    </label>
                </div>
              </div>
              <!-- Bot Protection list-->
              <domain-bot-protection-list id="enableBotProtectionBlock" account-id="{{model.account_id}}" ng-if="model.rev_component_bp.enable_bot_protection" ng-model="model.rev_component_bp.bot_protection"></domain-bot-protection-list>
              <!-- //  “Bot Protection” -->
              <hr>
            </uib-tab>
            <uib-tab index="7" heading="Custom VCL Rules" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This tab allows Varnish VCL experts to configure custom VCL rules to be applied for the domain configuration">
              <!--  “Custom VCL Rules” -->
              <div class="form-group form-inline">
                <label for="customVcl" class="col-sm-3 control-label">Custom VCL Rules</label>
                <div class="col-md-9">
                  <toggle-switch id="customVCLrules" name="customVcl" is-disabled="_loading || _isEditLocked || model.rev_component_bp.enable_cache==false" ng-model="model.rev_component_bp.custom_vcl.enabled" on-label="On" off-label="Off">
                  </toggle-switch>
                  <label for="customVcl" class="text-info" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="Enables you to configure custom Varnish Configuration Language (VCL) rules to be executed by edge proxy servers. The feature requires that “Edge Caching” switch will be in ON position">
                    <i class="fa fa-question-circle"></i>
                  </label>
                </div>
              </div>
              <domain-custom-vcl id="customVCLrulesBlock" ng-if="model.rev_component_bp.enable_cache&&model.rev_component_bp.custom_vcl.enabled" class="" ng-model="model.rev_component_bp.custom_vcl"></domain-custom-vcl>
              <!-- //  “Custom VCL Rules” -->
              <hr>
            </uib-tab>
            <uib-tab index="8" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This section allows you to enhance the service by running custom Lua code snippets on proxy servers">
              <!--  Lua Scripting -->
              <uib-tab-heading> Lua Scripting <i class="label label-primary pull-right fa beta-functional"> Beta</i></uib-tab-heading>
                <domain-lua-scripting class="form-group" ng-model="model"></domain-lua-scripting>
              <hr>
              <!--  // Lua Scripting -->
            </uib-tab>
            <!-- Third-Party Links-->
            <uib-tab index="9" heading="Third-Party Links" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="This section allows you to accelerate your website by redirecting to the CDN platform external objects/scripts served by potentially slow third-party vendors">
              <domain-the-third-party-links class="form-group" ng-model="$thirdPartyLinks"></domain-the-third-party-links>
              <hr>
            </uib-tab>
            <!-- ImageEngine-->
            <uib-tab index="10" heading="Image Optimization" popover-append-to-body="{{true}}" popover-trigger="mouseenter" uib-popover="The Image Optimization feature provides a simple, automatic and transparent way to resize served images depending on maximum screen resolution of end user devices">
              <div ng-include="'parts/domains/domain-image-engine/domain-image-engine.tpl.html'" class="form-group"></div>
              <hr>
            </uib-tab>
          </uib-tabset>
          <div class="form-group">
            <label class="col-sm-3 control-label">Current Publishing Status</label>
            <div class="col-md-9 control-label" style="text-align:left" interval="DOMAIN_STATUS_REFRESH_INTERVAL_EDIT_FORM" domain-staging-status ng-id="modelInfo.status_domain_id"></div>
          </div>
          <div class="form-group ">
            <div class="col-sm-offset-2 col-sm-10">
              <a ui-sref="^" class="btn btn-default">
                <i class="glyphicon glyphicon-remove"></i>&nbsp; Cancel
              </a>
              <button id="verifyDomain" class="btn btn-info" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="disableSubmit(model, true) || editForm.$invalid || isReadOnly()" ng-click="validateDomain(model)">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-check'"></i>&nbsp; Verify
              </button>
              <button id="updateDomain" class="btn btn-success" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="disableSubmit(model, true) || editForm.$invalid || isReadOnly()" ng-click="updateDomain(model)" uib-tooltip="{{domain_update_help_info}}">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-file'"></i>&nbsp; Update
              </button>
              <button id="publishDomain" class="btn btn-success" ng-class="{'btn-disabled':isReadOnly()}" ng-disabled="disableSubmit(model, true)|| editForm.$invalid || isReadOnly()" ng-click="publishDomain(model)" uib-tooltip="{{domain_publish_help_info}}">
                <i class="glyphicon" ng-class="_loading ? 'glyphicon-refresh spin':'glyphicon-ok'"></i>&nbsp; Publish
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
